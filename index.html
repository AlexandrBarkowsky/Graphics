<!DOCTYPE html>
<html>
<head>
    <title>Test PaperJS</title>
    <script src="assets\js\mediator.min.js"></script>
    <script src="assets\js\jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="assets\js\paper.js"></script>
    <script type="text/javascript" src="JS\SettingsManager.js"></script>
    <script type="text/javascript" src="JS\Background.js"></script>
    <script type="text/javascript" src="JS\Tools.js"></script>
    <script type="text/javascript" src="JS\Scaling.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS\style.css"/>

</head>
<body>
<ul>
    <li><a href="#" onclick="tools[0].activate();">Line</a></li>
    <li><a href="#" onclick="tools[1].activate();">Move</a></li>
    <li><a href="#" onclick="tools[2].activate();">Hand</a></li>
    <li>Grid color <input type="color" id="pickerGridColor" onchange="getGridColorVal(pickerGridColor.value)"/></li>
    <li>Axis color <input type="color" id="pickerAxisColor" onchange="getAxisColorVal(pickerAxisColor.value)"/></li>
</ul>


<canvas id="myCanvas" resize></canvas>


<script type="text/javascript">
    var mediator = new Mediator();
    var settingsManager = new SettingsManager(mediator);


    //BydloCode
    var canvas = document.getElementById('myCanvas');
    var pickerGridColor = document.getElementById("pickerGridColor");
    var pickerAxisColor = document.getElementById("pickerAxisColor");

    //
    function getGridColorVal(colorValue) {
        settingsManager.settings.background.gridColor = colorValue;
    }

    function getAxisColorVal(colorValue) {
        settingsManager.settings.background.axisColor = colorValue;
    }
    function setColorPicker() {
        pickerGridColor.value = settingsManager.settings.background.gridColor;
        pickerAxisColor.value = settingsManager.settings.background.axisColor;
    }
    setColorPicker();


    paper.install(window);

    window.onload = function () {
        paper.setup('myCanvas');
        var background = new Background(mediator, settingsManager.settings.background);
        var tools = new Tools(mediator, settingsManager.settings.drawing);
        var scaling = new Scaling(mediator, settingsManager.settings.scaling, canvas);
        var drawing = new Layer();
        mediator.subscribe("backgroundUpdated", function () {
            drawing.activate();
        });
    }
</script>
<style type="text/css">

</style>
</body>
</html>